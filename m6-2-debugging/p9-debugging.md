# Урок по отладке кода на Python в VS Code

Отладка - важнейший навык для любого программиста. В этом уроке я покажу, как эффективно использовать отладчик в VS Code для Python.

## 1. Настройка среды для отладки

Перед началом убедитесь, что у вас установлены:
- [VS Code](https://code.visualstudio.com/)
- [Расширение Python](https://marketplace.visualstudio.com/items?itemName=ms-python.python)
- Интерпретатор Python (рекомендуется Python 3.6+)

## 2. Подготовка примера кода

2.1 Давайте разберем отладку на самом простом примере.

## 1. Простой пример с ошибкой

Создайте файл `simple_debug.py`:

```python
def add_numbers(a, b):
    result = a + b
    return result

numbers = [5, "3"]  # Ошибка: строка вместо числа

total = add_numbers(numbers[0], numbers[1])
print(total)
```

## 2. Как запустить отладку

1. Откройте этот файл в VS Code
2. Нажмите F5 (или зелёную кнопку "Run and Debug")
3. Вы увидите ошибку - нельзя складывать число и строку

## 3. Простая отладка

**Шаг 1:** Поставьте точку останова - кликните слева от строки с `result = a + b` (появится красная точка)

**Шаг 2:** Снова нажмите F5

**Шаг 3:** Когда выполнение остановится:
- Наведите курсор на `a` и `b` - увидите их значения
- Внизу в разделе "Variables" тоже можно посмотреть значения

**Шаг 4:** Используйте кнопки:
- ▶️ Continue (продолжить)
- 🔼 Step Over (выполнить шаг)
- 🔽 Step Into (войти в функцию)

## 4. Как исправить ошибку

1. В коде замените `"3"` на `3`
2. Уберите точку останова (кликните на красную точку)
3. Запустите снова - теперь все работает!

## 5. Самые важные сочетания клавиш

- F5 - начать/продолжить отладку
- F9 - поставить/убрать точку останова
- F10 - шаг без входа в функцию
- F11 - шаг с входом в функцию

Попробуйте на этом простом примере, и вы поймете основы отладки!


Создадим файл `debug_example.py` с преднамеренной ошибкой:

```python
def calculate_average(numbers):
    total = 0
    for num in numbers:
        total += num
    average = total / len(numbers)
    return average

def process_data(data):
    result = []
    for item in data:
        squared = item ** 2
        result.append(squared)
    avg = calculate_average(result)
    return avg

data = [1, 2, 3, "4", 5]  # Ошибка: строка вместо числа
print(process_data(data))
```

## 3. Запуск отладчика

1. Откройте файл в VS Code
2. Нажмите F5 или выберите "Run and Debug" из меню слева
3. Выберите "Python File" в появившемся меню

VS Code запустит код, и вы увидите ошибку TypeError при попытке возвести строку в квадрат.

## 4. Установка точек останова (breakpoints)

1. Кликните слева от номера строки, где хотите остановить выполнение (например, строка 7)
2. Запустите отладку снова (F5)
3. Выполнение остановится на точке останова

## 5. Основные функции отладчика

Во время остановки используйте панель отладки:
- **Continue (F5)** - продолжить выполнение до следующей точки останова
- **Step Over (F10)** - выполнить текущую строку и перейти к следующей
- **Step Into (F11)** - войти в вызываемую функцию
- **Step Out (Shift+F11)** - выйти из текущей функции
- **Restart (Ctrl+Shift+F5)** - перезапустить отладку
- **Stop (Shift+F5)** - остановить отладку

## 6. Просмотр переменных

Во время остановки вы можете:
1. Наводить курсор на переменные в коде для просмотра их значений
2. Смотреть раздел "Variables" в панели отладки
3. Добавлять переменные в раздел "Watch" для постоянного наблюдения

## 7. Использование консоли отладки

В консоли отладки (Debug Console) вы можете:
- Выполнять выражения Python в контексте текущей остановки
- Проверять значения переменных
- Изменять значения переменных (что может помочь в тестировании)

## 8. Условные точки останова

1. Кликните правой кнопкой на точке останова
2. Выберите "Edit Breakpoint"
3. Введите условие (например, `num == 3`)

Теперь отладчик остановится только когда условие выполнится.

## 9. Конфигурация отладки (launch.json)

Для сложных сценариев можно настроить файл `.vscode/launch.json`:

```json
{
    "version": "0.2.0",
    "configurations": [
        {
            "name": "Python: Current File",
            "type": "python",
            "request": "launch",
            "program": "${file}",
            "console": "integratedTerminal",
            "args": ["--input", "data.txt"]
        }
    ]
}
```

## 10. Отладка тестов

Для отладки pytest/unittest тестов:
1. Установите точки останова в тестах
2. Выберите "Debug Test" над тестовой функцией
3. Или создайте конфигурацию для тестов в launch.json

## 11. Полезные советы

1. Используйте `import pdb; pdb.set_trace()` как альтернативу точкам останова
2. Для Django/Flask используйте специальные конфигурации отладки
3. Логируйте сложные выражения с помощью `print()`, когда отладка затруднена
4. Используйте "Run without debugging" (Ctrl+F5) для быстрой проверки

## Практическое задание

1. Исправьте ошибку в примере кода (замените строку "4" на число 4)
2. Установите точку останова в функции `calculate_average`
3. Используйте Step Over для пошагового выполнения
4. Добавьте условие на точку останова (останавливаться только когда average > 10)
5. Измените значение переменной через Debug Console и продолжите выполнение

