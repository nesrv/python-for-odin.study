# **–£—Ä–æ–∫ –ø–æ `mypy` –¥–ª—è –Ω–æ–≤–∏—á–∫–æ–≤: —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è –≤ Python**  

`mypy` ‚Äî —ç—Ç–æ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä —Ç–∏–ø–æ–≤ –¥–ª—è Python, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–º–æ–≥–∞–µ—Ç –Ω–∞—Ö–æ–¥–∏—Ç—å –æ—à–∏–±–∫–∏, —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å —Ç–∏–ø–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö, –¥–æ –∑–∞–ø—É—Å–∫–∞ –ø—Ä–æ–≥—Ä–∞–º–º—ã.  

–í —ç—Ç–æ–º —É—Ä–æ–∫–µ —Ä–∞–∑–±–µ—Ä—ë–º:  
1. –ß—Ç–æ —Ç–∞–∫–æ–µ `mypy` –∏ –∑–∞—á–µ–º –æ–Ω –Ω—É–∂–µ–Ω?  
2. –ö–∞–∫ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å `mypy`.  
3. –û—Å–Ω–æ–≤—ã –∞–Ω–Ω–æ—Ç–∞—Ü–∏–π —Ç–∏–ø–æ–≤ –≤ Python.  
4. –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è `mypy`.  
5. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ IDE –∏ CI/CD.  

---

## **1. –ó–∞—á–µ–º –Ω—É–∂–µ–Ω `mypy`?**  
Python ‚Äî —è–∑—ã–∫ —Å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–π —Ç–∏–ø–∏–∑–∞—Ü–∏–µ–π, –Ω–æ —Å –≤–µ—Ä—Å–∏–∏ **3.5** –≤ –Ω—ë–º –ø–æ—è–≤–∏–ª–∏—Å—å **–∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏ —Ç–∏–ø–æ–≤** (type hints). `mypy` –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, —á—Ç–æ–±—ã —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏—Å—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ.  

**–ü—Ä–æ–±–ª–µ–º—ã, –∫–æ—Ç–æ—Ä—ã–µ —Ä–µ—à–∞–µ—Ç `mypy`:**  
‚ùå –û—à–∏–±–∫–∏ –≤ —Ç–∏–ø–∞—Ö –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ —Ñ—É–Ω–∫—Ü–∏–π.  
‚ùå –ù–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã—Ö —Ç–∏–ø–æ–≤.  
‚ùå –û–ø–µ—á–∞—Ç–∫–∏ –≤ –∞—Ç—Ä–∏–±—É—Ç–∞—Ö –∫–ª–∞—Å—Å–æ–≤.  

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**  
‚úÖ –†–∞–Ω–Ω–µ–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –æ—à–∏–±–æ–∫.  
‚úÖ –£–ª—É—á—à–∞–µ—Ç —á–∏—Ç–∞–µ–º–æ—Å—Ç—å –∫–æ–¥–∞.  
‚úÖ –ü–æ–º–æ–≥–∞–µ—Ç –≤ –±–æ–ª—å—à–∏—Ö –ø—Ä–æ–µ–∫—Ç–∞—Ö.  

---

## **2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫**  

### **–£—Å—Ç–∞–Ω–æ–≤–∫–∞**  
```bash
pip install mypy
```

### **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–∞–π–ª–∞**  
```bash
mypy –≤–∞—à_—Ñ–∞–π–ª.py
```

### **–ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ–π –ø–∞–ø–∫–∏**  
```bash
mypy –≤–∞—à–∞_–ø–∞–ø–∫–∞/
```

---

## **3. –û—Å–Ω–æ–≤—ã –∞–Ω–Ω–æ—Ç–∞—Ü–∏–π —Ç–∏–ø–æ–≤**  

### **–ê–Ω–Ω–æ—Ç–∞—Ü–∏–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö**  
```python
name: str = "Alice"
age: int = 25
is_student: bool = True
```

### **–ê–Ω–Ω–æ—Ç–∞—Ü–∏–∏ —Ñ—É–Ω–∫—Ü–∏–π**  
```python
def greet(name: str) -> str:
    return f"Hello, {name}!"
```

### **–°–ª–æ–∂–Ω—ã–µ —Ç–∏–ø—ã (–∏–∑ `typing`)**  
```python
from typing import List, Dict, Optional, Union

def process_data(data: List[int]) -> Dict[str, int]:
    return {"count": len(data)}

def get_user(id: int) -> Optional[str]:  # –ú–æ–∂–µ—Ç –≤–µ—Ä–Ω—É—Ç—å `str` –∏–ª–∏ `None`
    return "Alice" if id == 1 else None

def parse_input(value: Union[str, int]) -> float:  # –ü—Ä–∏–Ω–∏–º–∞–µ—Ç `str` –∏–ª–∏ `int`
    return float(value)
```

---

## **4. –ü—Ä–∏–º–µ—Ä—ã —Ä–∞–±–æ—Ç—ã `mypy`**  

### **‚ùå –ö–æ–¥ —Å –æ—à–∏–±–∫–∞–º–∏ (`bad_code.py`)**  
```python
def add(a: int, b: int) -> int:
    return a + b

result = add(5, "10")  # –û—à–∏–±–∫–∞: –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è —Å—Ç—Ä–æ–∫–∞ –≤–º–µ—Å—Ç–æ —á–∏—Å–ª–∞
```

### **–ó–∞–ø—É—Å–∫ `mypy`**  
```bash
mypy bad_code.py
```

### **–í—ã–≤–æ–¥:**  
```
bad_code.py:4: error: Argument 2 to "add" has incompatible type "str"; expected "int"  [arg-type]
Found 1 error in 1 file (checked 1 source file)
```

### **‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π –∫–æ–¥**  
```python
def add(a: int, b: int) -> int:
    return a + b

result = add(5, 10)  # –¢–µ–ø–µ—Ä—å –≤—Å—ë –ø—Ä–∞–≤–∏–ª—å–Ω–æ
```

---

## **5. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ `mypy`**  

### **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∞–π–ª (`mypy.ini` –∏–ª–∏ `pyproject.toml`)**  
```ini
[mypy]
python_version = 3.10
ignore_missing_imports = True  # –ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ –º–æ–¥—É–ª–∏
strict = True  # –°—Ç—Ä–æ–≥–∏–π —Ä–µ–∂–∏–º (–ø—Ä–æ–≤–µ—Ä—è–µ—Ç –≤—Å—ë)
```

### **–ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫**  
```python
result = add(5, "10")  # type: ignore  # mypy –ø—Ä–æ–ø—É—Å—Ç–∏—Ç —ç—Ç—É —Å—Ç—Ä–æ–∫—É
```

---

## **6. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**  

### **–í VS Code**  
1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ **Python** (Microsoft).  
2. –î–æ–±–∞–≤—å—Ç–µ –≤ `settings.json`:  
   ```json
   "python.linting.mypyEnabled": true,
   "python.linting.mypyArgs": [
       "--ignore-missing-imports",
       "--strict"
   ]
   ```

### **–í CI/CD (GitHub Actions)**  
```yaml
- name: Run mypy
  run: |
    pip install mypy
    mypy .
```

---

## **–ò—Ç–æ–≥**  
‚úÖ `mypy` –ø–æ–º–æ–≥–∞–µ—Ç –∏–∑–±–µ–≥–∞—Ç—å –æ—à–∏–±–æ–∫ —Ç–∏–ø–æ–≤.  
‚úÖ –ê–Ω–Ω–æ—Ç–∞—Ü–∏–∏ (`: type`, `-> type`) –¥–µ–ª–∞—é—Ç –∫–æ–¥ –ø–æ–Ω—è—Ç–Ω–µ–µ.  
‚úÖ –ú–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å —Å—Ç—Ä–æ–≥–æ—Å—Ç—å –ø—Ä–æ–≤–µ—Ä–∫–∏.  
‚úÖ –ò–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ—Ç—Å—è –≤ IDE –∏ CI/CD.  

**–î–∞–ª—å—à–µ:**  
- [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è mypy](https://mypy.readthedocs.io/)  
- `typing` –º–æ–¥—É–ª—å (`List`, `Dict`, `Optional`, –∏ —Ç. –¥.)  
- `dataclasses` + `mypy` –¥–ª—è –∫–ª–∞—Å—Å–æ–≤.  

–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –¥–æ–±–∞–≤–∏—Ç—å `mypy` –≤ —Å–≤–æ–π –ø—Ä–æ–µ–∫—Ç! üöÄ