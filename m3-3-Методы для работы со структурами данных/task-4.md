### **Задача: "Анализ посещений кружков"**  
Есть словарь `attendance`, где хранится информация о посещениях учеников разных кружков.  

**Исходные данные:**  
```python
attendance = {
    "Алексей": {"программирование": 5, "математика": 3},
    "Мария": {"физика": 4, "математика": 6},
    "Иван": {"программирование": 2, "физика": 3},
    "Елена": {"математика": 5}
}
```

### **Задания:**  
1. **Добавить новое посещение**  
   Пусть **"Алексей"** посетил **"физику"** 1 раз.  
   Если кружка или ученика нет — создать.  

2. **Найти самого активного ученика** (по общему числу посещений).  

3. **Посчитать статистику по кружку "математика"**:  
   - Сколько учеников его посещают?  
   - Какое среднее количество посещений?  

4. **Объединить данные** с новым словарём `new_data`, чтобы посещения суммировались.  

---

### **Решение:**  

#### **1. Добавление посещения**  
Используем метод `.get()` для проверки и добавления значений:  
```python
# Если ученика нет — создаём запись, иначе обновляем
attendance["Алексей"]["физика"] = attendance["Алексей"].get("физика", 0) + 1
print(attendance["Алексей"])
```
**Вывод:**  
```python
{'программирование': 5, 'математика': 3, 'физика': 1}
```

#### **2. Самый активный ученик**  
Считаем сумму посещений для каждого ученика и находим максимум:  
```python
max_visits = 0
best_student = ""

for student, clubs in attendance.items():
    total = sum(clubs.values())
    if total > max_visits:
        max_visits = total
        best_student = student

print(f"Самый активный: {best_student} ({max_visits} посещений)")
```
**Вывод:**  
```python
Самый активный: Мария (10 посещений)
```

#### **3. Статистика по кружку "математика"**  
Считаем количество учеников и среднее:  
```python
math_students = 0
math_visits = 0

for student, clubs in attendance.items():
    if "математика" in clubs:
        math_students += 1
        math_visits += clubs["математика"]

avg_visits = math_visits / math_students if math_students > 0 else 0

print(f"Учеников: {math_students}, Среднее посещений: {avg_visits:.2f}")
```
**Вывод:**  
```python
Учеников: 3, Среднее посещений: 4.67
```

#### **4. Объединение данных**  
Допустим, есть новые данные:  
```python
new_data = {"Ольга": {"физика": 2}, "Иван": {"физика": 1}}
```
Обновляем основной словарь:  
```python
for student, clubs in new_data.items():
    if student in attendance:
        for club, visits in clubs.items():
            attendance[student][club] = attendance[student].get(club, 0) + visits
    else:
        attendance[student] = clubs

print(attendance["Иван"])  # Проверяем, что у Ивана теперь 4 посещения физики
```
**Вывод:**  
```python
{'программирование': 2, 'физика': 4}  # Было 3 + добавили 1
```

### **Итоговый вывод:**  
```python
{
    'Алексей': {'программирование': 5, 'математика': 3, 'физика': 1},
    'Мария': {'физика': 4, 'математика': 6},
    'Иван': {'программирование': 2, 'физика': 4},
    'Елена': {'математика': 5},
    'Ольга': {'физика': 2}
}
```

### **Что мы использовали?**  
- `.get(key, default)` — безопасное получение значения из словаря.  
- `.items()` — итерация по ключам и значениям.  
- `sum()` — подсчёт суммы посещений.  
- Проверки `if in` — для обновления данных.  

